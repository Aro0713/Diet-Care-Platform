(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{2769:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/review",function(){return a(8423)}])},8423:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ReviewPage}});var n=a(5893),i=a(7294),l=a(9350);function ReviewPage(){let[e,t]=(0,i.useState)([]),[a,o]=(0,i.useState)("dietetyk");(0,i.useEffect)(()=>{let e=localStorage.getItem("pendingDiets");e&&t(JSON.parse(e))},[]);let approve=n=>{let i=e.filter(e=>e.id!==n);t(i),localStorage.setItem("pendingDiets",JSON.stringify(i));let l=JSON.parse(localStorage.getItem("dietHistory")||"[]"),o=e.find(e=>e.id===n);l.push({...o,approvedBy:a,approvedAt:new Date().toLocaleString()}),localStorage.setItem("dietHistory",JSON.stringify(l)),alert("✅ Dieta zatwierdzona i zapisana do historii.")},reject=a=>{let n=e.filter(e=>e.id!==a);t(n),localStorage.setItem("pendingDiets",JSON.stringify(n)),alert("❌ Dieta została odrzucona.")};return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-100 p-8",children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold mb-4",children:["Zatwierdzanie diet (",a,")"]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"block mb-1 font-semibold",children:"Twoja rola:"}),(0,n.jsxs)("select",{className:"border px-2 py-1",value:a,onChange:e=>o(e.target.value),children:[(0,n.jsx)("option",{value:"lekarz",children:"Lekarz"}),(0,n.jsx)("option",{value:"dietetyk",children:"Dietetyk"})]})]}),0===e.length?(0,n.jsx)("p",{children:"Brak diet oczekujących na zatwierdzenie."}):e.map(e=>(0,n.jsxs)("div",{className:"bg-white p-4 rounded shadow mb-4",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["\uD83D\uDCC5 ",e.date]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Pacjent:"})," ",e.patient.age," lat, ",e.patient.sex]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Waga:"})," ",e.patient.weight," kg | ",(0,n.jsx)("strong",{children:"Wzrost:"})," ",e.patient.height," cm | ",(0,n.jsx)("strong",{children:"BMI:"})," ",e.bmi]}),(0,n.jsx)("ul",{className:"list-disc pl-5 text-sm mt-2",children:e.diet.map((e,t)=>(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:e.name}),": ",e.ingredients.map(e=>"".concat(e.product," (").concat(e.weight,"g)")).join(", ")]}),(0,n.jsxs)("div",{children:["Kalorie: ",e.calories," kcal | IG: ",e.glycemicIndex]})]},t))}),(0,n.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,n.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded",onClick:()=>approve(e.id),children:"✅ Zatwierdź"}),(0,n.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded",onClick:()=>reject(e.id),children:"❌ Odrzuć"}),(0,n.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>(0,l.s)(e.patient,e.bmi,e.diet),children:"\uD83D\uDCC4 PDF"})]})]},e.id))]})}},9350:function(e,t,a){"use strict";a.d(t,{s:function(){return generateDietPdf}});var n=a(4842);async function generateDietPdf(e,t,i){var l,o;let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0,s=(await a.e(270).then(a.t.bind(a,6727,23))).default,d=(await a.e(957).then(a.t.bind(a,7920,23))).default;s.vfs=d.vfs;let g=[{text:"\uD83D\uDCCB Plan żywieniowy pacjenta",style:"header"},{text:"Data: ".concat(new Date().toLocaleString()),margin:[0,0,0,10]},{text:"Dane pacjenta:\nWiek: ".concat(e.age," lat | Płeć: ").concat(e.sex," | Waga: ").concat(e.weight," kg | Wzrost: ").concat(e.height," cm | BMI: ").concat(null!=t?t:"n/a"),margin:[0,0,0,10]},{text:"Schorzenia: ".concat((null===(l=e.conditions)||void 0===l?void 0:l.join(", "))||"brak","\nAlergie: ").concat(e.allergies||"brak","\nRegion: ").concat(e.region||"brak"),margin:[0,0,0,10]},{text:"\uD83E\uDE7A Uwzględnione dane medyczne:",style:"subheader",margin:[0,10,0,4]},...(null!==(o=e.medical)&&void 0!==o?o:[]).flatMap(e=>[{text:"• ".concat(e.condition),bold:!0,margin:[0,4,0,0]},...e.tests.map(e=>({text:"   → ".concat(e.name,": ").concat(e.value||"—"),margin:[0,0,0,2]}))]),{text:"\uD83C\uDF74 Zalecana dieta:",style:"subheader",margin:[0,10,0,6]},...i.map(e=>({table:{widths:["*"],body:[[{text:"\uD83C\uDF7D️ ".concat(e.name),style:"mealTitle"}],[{text:e.ingredients.map(e=>"• ".concat(e.product," – ").concat(e.weight," g")).join("\n")}],[{text:"Kalorie: ".concat(e.calories," kcal | IG: ").concat(e.glycemicIndex),style:"mealInfo"}]]},layout:"lightHorizontalLines",margin:[0,0,0,10]}))];c&&g.push({image:n.y,width:140,alignment:"right",margin:[0,30,0,0]}),g.push({text:"---\n\xa9 ALS sp. z o.o. | KRS 0000087600 | NIP 6252121456 | REGON 266795439\nEmail: a4p.email@gmail.com | tel. +48 500 720 242",style:"footer",margin:[0,30,0,0],alignment:"center"}),s.createPdf({content:g,styles:{header:{fontSize:18,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:14,bold:!0},mealTitle:{bold:!0,fillColor:"#eeeeee"},mealInfo:{italics:!0,fontSize:10,color:"#333333"},footer:{fontSize:9,color:"gray"}},defaultStyle:{fontSize:11},background:r?[{image:r,width:300,opacity:.06,absolutePosition:{x:100,y:200}}]:void 0}).download("dieta_".concat(new Date().toISOString().slice(0,10),".pdf"))}},4842:function(e,t,a){"use strict";a.d(t,{y:function(){return n}});let n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAgAElEQVR4nO3dWZAdV33n8d8RA0giIiAIiBCLLmiGfVq2vSftX1bV1tt1r92zqmrbrqnt2WV9W/d7qZfZcf/VhEV3RQsMgAcQhAOJw4EdIgghdV9k3nP+/M+Z..."}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2769)}),_N_E=e.O()}]);