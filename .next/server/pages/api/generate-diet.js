"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate-diet";
exports.ids = ["pages/api/generate-diet"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-diet&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgenerate-diet.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-diet&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgenerate-diet.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_generate_diet_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\generate-diet.ts */ \"(api)/./pages/api/generate-diet.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_generate_diet_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_generate_diet_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_diet_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_diet_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generate-diet\",\n        pathname: \"/api/generate-diet\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_generate_diet_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlLWRpZXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2dlbmVyYXRlLWRpZXQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMkQ7QUFDM0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWV0LXBsYXRmb3JtLz9lYmY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcZ2VuZXJhdGUtZGlldC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlLWRpZXRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nZW5lcmF0ZS1kaWV0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-diet&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgenerate-diet.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/generate-diet.ts":
/*!************************************!*\
  !*** ./pages/api/generate-diet.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAI({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst languageMap = {\n    pl: \"polski\",\n    en: \"English\",\n    es: \"espa\\xf1ol\",\n    fr: \"fran\\xe7ais\",\n    de: \"Deutsch\",\n    ua: \"українська\",\n    ru: \"русский\",\n    zh: \"中文\",\n    hi: \"हिन्दी\",\n    ar: \"العربية\",\n    he: \"עברית\"\n};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Only POST requests are allowed\"\n        });\n    }\n    const body = req.body;\n    const { age, gender, weight, height, allergies, region, medical, interview, goal, cuisine, model, lang = \"pl\" } = body;\n    const selectedLang = languageMap[lang] || \"polski\";\n    const prompt = `\n  You are an experienced clinical dietitian AI.\n  \n  Generate a personalized 7-day diet plan strictly in the language: ${selectedLang}.\n  Use only ${selectedLang} for all content: day names, meal names, ingredients, units.\n  Do not include any other language.\n  \n  Analyze:\n  - all patient medical data (including lab results and conditions),\n  - interview data (lifestyle, preferences),\n  - preferred cuisine and diet model,\n  - based on trusted sources: USDA, IŻŻ, PZH, Open Food Facts, ESPEN, EFSA, NICE, AND, PubMed, Cochrane.\n  \n  Return the diet as a JSON object in this exact format:\n  \n  {\n    \"Monday\": [\n      {\n        \"name\": \"translated meal name\",\n        \"ingredients\": [{ \"product\": \"translated product\", \"weight\": 120 }],\n        \"calories\": 400,\n        \"glycemicIndex\": 45\n      },\n      ...\n    ],\n    ...\n  }\n  \n  Important rules:\n  - Use exactly 7 keys for days: \\\"Monday\\\" to \\\"Sunday\\\" (do not translate day names).\n  - Each value must be an array of meals (Meal[]). Never return nested objects like { \\\"Śniadanie\\\": {...} }.\n  - Each day must contain between 3 and 5 meals.\n  - Return only valid JSON. No markdown, no headings, no explanation.\n  \n  Patient info:\n  - Age: ${age}\n  - Gender: ${gender}\n  - Weight: ${weight} kg\n  - Height: ${height} cm\n  - Region: ${region}\n  - Allergies: ${allergies || \"none\"}\n  - Conditions: ${medical?.selectedConditions?.join(\", \") || \"none\"}\n  - Goal: ${goal}\n  - Cuisine: ${cuisine}\n  - Diet model: ${model}\n  - Lifestyle: ${interview?.lifestyle || \"N/A\"}\n  `;\n    try {\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0.7,\n            max_tokens: 3000\n        });\n        const rawText = completion.choices[0]?.message?.content || \"\";\n        console.log(\"\\uD83E\\uDDFE rawText:\", rawText);\n        // Walidacja minimalna zawartości\n        if (!rawText || rawText.length < 100 || !rawText.includes(\"{\") || !rawText.includes(\"name\") || !rawText.includes(\"calories\")) {\n            console.warn(\"⚠️ Nieprawidłowa lub zbyt kr\\xf3tka odpowiedź z OpenAI.\");\n            return res.status(500).json({\n                error: \"Nieprawidłowa odpowiedź z AI – brak danych diety.\"\n            });\n        }\n        let parsed;\n        try {\n            parsed = JSON.parse(rawText);\n            console.log(\"✅ parsed diet:\", parsed);\n        } catch (parseError) {\n            console.error(\"❌ Błąd parsowania JSON:\", rawText);\n            return res.status(500).json({\n                error: \"Nie udało się sparsować diety z AI.\"\n            });\n        }\n        const ensureCompleteWeek = (diet)=>{\n            const defaultMeal = {\n                name: \"\",\n                ingredients: [],\n                calories: 0,\n                glycemicIndex: 0\n            };\n            const days = [\n                \"Monday\",\n                \"Tuesday\",\n                \"Wednesday\",\n                \"Thursday\",\n                \"Friday\",\n                \"Saturday\",\n                \"Sunday\"\n            ];\n            for (const day of days){\n                if (!diet[day]) diet[day] = [];\n                while(diet[day].length < 3){\n                    diet[day].push({\n                        ...defaultMeal\n                    });\n                }\n            }\n            return diet;\n        };\n        const completed = ensureCompleteWeek(parsed);\n        return res.status(200).json({\n            diet: completed\n        });\n    } catch (err) {\n        console.error(\"❌ Błąd OpenAI:\", err.message || err);\n        return res.status(500).json({\n            error: \"Błąd generowania diety.\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQVU7Z0JBQVc7Z0JBQWE7Z0JBQVk7Z0JBQVU7Z0JBQVk7YUFBUztZQUMzRixLQUFLLE1BQU1DLE9BQU9ELEtBQU07Z0JBQ3RCLElBQUksQ0FBQ04sSUFBSSxDQUFDTyxJQUFJLEVBQUVQLElBQUksQ0FBQ08sSUFBSSxHQUFHLEVBQUU7Z0JBQzlCLE1BQU9QLElBQUksQ0FBQ08sSUFBSSxDQUFDZixNQUFNLEdBQUcsRUFBRztvQkFDM0JRLElBQUksQ0FBQ08sSUFBSSxDQUFDQyxJQUFJLENBQUM7d0JBQUUsR0FBR1AsV0FBVztvQkFBQztnQkFDbEM7WUFDRjtZQUNBLE9BQU9EO1FBQ1Q7UUFFQSxNQUFNUyxZQUFZVixtQkFBbUJKO1FBQ3JDLE9BQU94QyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUUwQyxNQUFNUztRQUFVO0lBQ2hELEVBQUUsT0FBT0MsS0FBVTtRQUNqQnBCLFFBQVEvQixLQUFLLENBQUMsa0JBQWtCbUQsSUFBSXJCLE9BQU8sSUFBSXFCO1FBQy9DLE9BQU92RCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBMEI7SUFDakU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RpZXQtcGxhdGZvcm0vLi9wYWdlcy9hcGkvZ2VuZXJhdGUtZGlldC50cz9kNTdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZW5BSSB9IGZyb20gJ29wZW5haSc7XG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBNZWFsIH0gZnJvbSAnQC90eXBlcyc7XG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxufSk7XG5cbmNvbnN0IGxhbmd1YWdlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBwbDogJ3BvbHNraScsXG4gIGVuOiAnRW5nbGlzaCcsXG4gIGVzOiAnZXNwYcOxb2wnLFxuICBmcjogJ2ZyYW7Dp2FpcycsXG4gIGRlOiAnRGV1dHNjaCcsXG4gIHVhOiAn0YPQutGA0LDRl9C90YHRjNC60LAnLFxuICBydTogJ9GA0YPRgdGB0LrQuNC5JyxcbiAgemg6ICfkuK3mlocnLFxuICBoaTogJ+CkueCkv+CkqOCljeCkpuClgCcsXG4gIGFyOiAn2KfZhNi52LHYqNmK2KknLFxuICBoZTogJ9ei15HXqNeZ16onLFxufTtcblxudHlwZSBEaWV0UmVxdWVzdEJvZHkgPSB7XG4gIGFnZTogc3RyaW5nIHwgbnVtYmVyO1xuICBnZW5kZXI6IHN0cmluZztcbiAgd2VpZ2h0OiBzdHJpbmcgfCBudW1iZXI7XG4gIGhlaWdodDogc3RyaW5nIHwgbnVtYmVyO1xuICBhbGxlcmdpZXM/OiBzdHJpbmc7XG4gIHJlZ2lvbjogc3RyaW5nO1xuICBtZWRpY2FsPzogeyBzZWxlY3RlZENvbmRpdGlvbnM/OiBzdHJpbmdbXSB9O1xuICBpbnRlcnZpZXc/OiB7IGxpZmVzdHlsZT86IHN0cmluZzsgbWVhbHNQZXJEYXk/OiBzdHJpbmcgfTtcbiAgZ29hbDogc3RyaW5nO1xuICBjdWlzaW5lOiBzdHJpbmc7XG4gIG1vZGVsOiBzdHJpbmc7XG4gIGxhbmc/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ09ubHkgUE9TVCByZXF1ZXN0cyBhcmUgYWxsb3dlZCcgfSk7XG4gIH1cblxuICBjb25zdCBib2R5ID0gcmVxLmJvZHkgYXMgRGlldFJlcXVlc3RCb2R5O1xuXG4gIGNvbnN0IHtcbiAgICBhZ2UsXG4gICAgZ2VuZGVyLFxuICAgIHdlaWdodCxcbiAgICBoZWlnaHQsXG4gICAgYWxsZXJnaWVzLFxuICAgIHJlZ2lvbixcbiAgICBtZWRpY2FsLFxuICAgIGludGVydmlldyxcbiAgICBnb2FsLFxuICAgIGN1aXNpbmUsXG4gICAgbW9kZWwsXG4gICAgbGFuZyA9ICdwbCcsXG4gIH0gPSBib2R5O1xuXG4gIGNvbnN0IHNlbGVjdGVkTGFuZyA9IGxhbmd1YWdlTWFwW2xhbmddIHx8ICdwb2xza2knO1xuXG4gIGNvbnN0IHByb21wdCA9IGBcbiAgWW91IGFyZSBhbiBleHBlcmllbmNlZCBjbGluaWNhbCBkaWV0aXRpYW4gQUkuXG4gIFxuICBHZW5lcmF0ZSBhIHBlcnNvbmFsaXplZCA3LWRheSBkaWV0IHBsYW4gc3RyaWN0bHkgaW4gdGhlIGxhbmd1YWdlOiAke3NlbGVjdGVkTGFuZ30uXG4gIFVzZSBvbmx5ICR7c2VsZWN0ZWRMYW5nfSBmb3IgYWxsIGNvbnRlbnQ6IGRheSBuYW1lcywgbWVhbCBuYW1lcywgaW5ncmVkaWVudHMsIHVuaXRzLlxuICBEbyBub3QgaW5jbHVkZSBhbnkgb3RoZXIgbGFuZ3VhZ2UuXG4gIFxuICBBbmFseXplOlxuICAtIGFsbCBwYXRpZW50IG1lZGljYWwgZGF0YSAoaW5jbHVkaW5nIGxhYiByZXN1bHRzIGFuZCBjb25kaXRpb25zKSxcbiAgLSBpbnRlcnZpZXcgZGF0YSAobGlmZXN0eWxlLCBwcmVmZXJlbmNlcyksXG4gIC0gcHJlZmVycmVkIGN1aXNpbmUgYW5kIGRpZXQgbW9kZWwsXG4gIC0gYmFzZWQgb24gdHJ1c3RlZCBzb3VyY2VzOiBVU0RBLCBJxbvFuywgUFpILCBPcGVuIEZvb2QgRmFjdHMsIEVTUEVOLCBFRlNBLCBOSUNFLCBBTkQsIFB1Yk1lZCwgQ29jaHJhbmUuXG4gIFxuICBSZXR1cm4gdGhlIGRpZXQgYXMgYSBKU09OIG9iamVjdCBpbiB0aGlzIGV4YWN0IGZvcm1hdDpcbiAgXG4gIHtcbiAgICBcIk1vbmRheVwiOiBbXG4gICAgICB7XG4gICAgICAgIFwibmFtZVwiOiBcInRyYW5zbGF0ZWQgbWVhbCBuYW1lXCIsXG4gICAgICAgIFwiaW5ncmVkaWVudHNcIjogW3sgXCJwcm9kdWN0XCI6IFwidHJhbnNsYXRlZCBwcm9kdWN0XCIsIFwid2VpZ2h0XCI6IDEyMCB9XSxcbiAgICAgICAgXCJjYWxvcmllc1wiOiA0MDAsXG4gICAgICAgIFwiZ2x5Y2VtaWNJbmRleFwiOiA0NVxuICAgICAgfSxcbiAgICAgIC4uLlxuICAgIF0sXG4gICAgLi4uXG4gIH1cbiAgXG4gIEltcG9ydGFudCBydWxlczpcbiAgLSBVc2UgZXhhY3RseSA3IGtleXMgZm9yIGRheXM6IFxcXCJNb25kYXlcXFwiIHRvIFxcXCJTdW5kYXlcXFwiIChkbyBub3QgdHJhbnNsYXRlIGRheSBuYW1lcykuXG4gIC0gRWFjaCB2YWx1ZSBtdXN0IGJlIGFuIGFycmF5IG9mIG1lYWxzIChNZWFsW10pLiBOZXZlciByZXR1cm4gbmVzdGVkIG9iamVjdHMgbGlrZSB7IFxcXCLFmm5pYWRhbmllXFxcIjogey4uLn0gfS5cbiAgLSBFYWNoIGRheSBtdXN0IGNvbnRhaW4gYmV0d2VlbiAzIGFuZCA1IG1lYWxzLlxuICAtIFJldHVybiBvbmx5IHZhbGlkIEpTT04uIE5vIG1hcmtkb3duLCBubyBoZWFkaW5ncywgbm8gZXhwbGFuYXRpb24uXG4gIFxuICBQYXRpZW50IGluZm86XG4gIC0gQWdlOiAke2FnZX1cbiAgLSBHZW5kZXI6ICR7Z2VuZGVyfVxuICAtIFdlaWdodDogJHt3ZWlnaHR9IGtnXG4gIC0gSGVpZ2h0OiAke2hlaWdodH0gY21cbiAgLSBSZWdpb246ICR7cmVnaW9ufVxuICAtIEFsbGVyZ2llczogJHthbGxlcmdpZXMgfHwgJ25vbmUnfVxuICAtIENvbmRpdGlvbnM6ICR7bWVkaWNhbD8uc2VsZWN0ZWRDb25kaXRpb25zPy5qb2luKCcsICcpIHx8ICdub25lJ31cbiAgLSBHb2FsOiAke2dvYWx9XG4gIC0gQ3Vpc2luZTogJHtjdWlzaW5lfVxuICAtIERpZXQgbW9kZWw6ICR7bW9kZWx9XG4gIC0gTGlmZXN0eWxlOiAke2ludGVydmlldz8ubGlmZXN0eWxlIHx8ICdOL0EnfVxuICBgO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTQnLFxuICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1dLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgIG1heF90b2tlbnM6IDMwMDAsIC8vIGtvbnRyb2xhIGtvc3p0w7N3XG4gICAgfSk7XG5cbiAgICBjb25zdCByYXdUZXh0ID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICcnO1xuICAgIGNvbnNvbGUubG9nKCfwn6e+IHJhd1RleHQ6JywgcmF3VGV4dCk7XG5cbiAgICAvLyBXYWxpZGFjamEgbWluaW1hbG5hIHphd2FydG/Fm2NpXG4gICAgaWYgKFxuICAgICAgIXJhd1RleHQgfHxcbiAgICAgIHJhd1RleHQubGVuZ3RoIDwgMTAwIHx8XG4gICAgICAhcmF3VGV4dC5pbmNsdWRlcygneycpIHx8XG4gICAgICAhcmF3VGV4dC5pbmNsdWRlcygnbmFtZScpIHx8XG4gICAgICAhcmF3VGV4dC5pbmNsdWRlcygnY2Fsb3JpZXMnKVxuICAgICkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gTmllcHJhd2lkxYJvd2EgbHViIHpieXQga3LDs3RrYSBvZHBvd2llZMW6IHogT3BlbkFJLicpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdOaWVwcmF3aWTFgm93YSBvZHBvd2llZMW6IHogQUkg4oCTIGJyYWsgZGFueWNoIGRpZXR5LicgfSk7XG4gICAgfVxuXG4gICAgbGV0IHBhcnNlZDogUmVjb3JkPHN0cmluZywgTWVhbFtdPjtcblxuICAgIHRyeSB7XG4gICAgICBwYXJzZWQgPSBKU09OLnBhcnNlKHJhd1RleHQpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBwYXJzZWQgZGlldDonLCBwYXJzZWQpO1xuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBCxYLEhWQgcGFyc293YW5pYSBKU09OOicsIHJhd1RleHQpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdOaWUgdWRhxYJvIHNpxJkgc3BhcnNvd2HEhyBkaWV0eSB6IEFJLicgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZW5zdXJlQ29tcGxldGVXZWVrID0gKGRpZXQ6IFJlY29yZDxzdHJpbmcsIE1lYWxbXT4pID0+IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRNZWFsID0ge1xuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgaW5ncmVkaWVudHM6IFtdLFxuICAgICAgICBjYWxvcmllczogMCxcbiAgICAgICAgZ2x5Y2VtaWNJbmRleDogMCxcbiAgICAgIH07XG4gICAgICBjb25zdCBkYXlzID0gWydNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5JywgJ1N1bmRheSddO1xuICAgICAgZm9yIChjb25zdCBkYXkgb2YgZGF5cykge1xuICAgICAgICBpZiAoIWRpZXRbZGF5XSkgZGlldFtkYXldID0gW107XG4gICAgICAgIHdoaWxlIChkaWV0W2RheV0ubGVuZ3RoIDwgMykge1xuICAgICAgICAgIGRpZXRbZGF5XS5wdXNoKHsgLi4uZGVmYXVsdE1lYWwgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkaWV0O1xuICAgIH07XG5cbiAgICBjb25zdCBjb21wbGV0ZWQgPSBlbnN1cmVDb21wbGV0ZVdlZWsocGFyc2VkKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBkaWV0OiBjb21wbGV0ZWQgfSk7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIELFgsSFZCBPcGVuQUk6JywgZXJyLm1lc3NhZ2UgfHwgZXJyKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0LFgsSFZCBnZW5lcm93YW5pYSBkaWV0eS4nIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiT3BlbkFJIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwibGFuZ3VhZ2VNYXAiLCJwbCIsImVuIiwiZXMiLCJmciIsImRlIiwidWEiLCJydSIsInpoIiwiaGkiLCJhciIsImhlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImJvZHkiLCJhZ2UiLCJnZW5kZXIiLCJ3ZWlnaHQiLCJoZWlnaHQiLCJhbGxlcmdpZXMiLCJyZWdpb24iLCJtZWRpY2FsIiwiaW50ZXJ2aWV3IiwiZ29hbCIsImN1aXNpbmUiLCJtb2RlbCIsImxhbmciLCJzZWxlY3RlZExhbmciLCJwcm9tcHQiLCJzZWxlY3RlZENvbmRpdGlvbnMiLCJqb2luIiwibGlmZXN0eWxlIiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJyYXdUZXh0IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJ3YXJuIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwicGFyc2VFcnJvciIsImVuc3VyZUNvbXBsZXRlV2VlayIsImRpZXQiLCJkZWZhdWx0TWVhbCIsIm5hbWUiLCJpbmdyZWRpZW50cyIsImNhbG9yaWVzIiwiZ2x5Y2VtaWNJbmRleCIsImRheXMiLCJkYXkiLCJwdXNoIiwiY29tcGxldGVkIiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/generate-diet.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-diet&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgenerate-diet.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();